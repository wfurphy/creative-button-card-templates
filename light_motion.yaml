############| Light associated with a Motion Sensor |############################>
light_motion:
  template: light
  # color: auto
  variables:
    _motion_entity: binary_sensor.occupancy
  triggers_update:
    - "[[[ return variables.__motion_entity ]]]"
  state:
    - value: "on"
      styles:
        grid:
          - grid-template-areas: '"i i n" "i i l" "i i motion"'
          - grid-template-columns: 1fr 1fr 3fr
          - grid-template-rows: 1fr 1fr 1fr
          - justify-items: start
        label:
          - display: inline-block
  styles:
    grid:
      - grid-template-areas: '"i i n" "i i motion"'
      - grid-template-columns: 1fr 1fr 3fr
      - grid-template-rows: 1fr 1fr
      - justify-items: start
    label:
      - display: none
    custom_fields:
      motion:
        - justify-self: start
  custom_fields:
    motion:
      card:
        type: custom:button-card
        entity: "[[[ return variables._motion_entity ]]]"
        layout: icon_label
        show_name: false
        show_last_changed: true
        size: 20px
        state:
          - value: "on"
            icon: mdi:run-fast
            styles:
              card:
                - opactiy: 0.8
        icon: mdi:run
        styles:
          grid:
            - grid-template-areas: i n
            - grid-template-columns: 1fr 3fr
          card:
            - background: none
            - box-shadow: none
            - overflow: visible
            - padding: 4px 0 2px 0
            - opacity: 0.4
            - margin-left: -2px
          label:
            - overflow: visible
            - justify-self: start
            - font-size: 75%
            - margin: 3px 0 0 -2px
            - text-align: left
          icon:
            - width: 18px
            - padding-right: 5px
