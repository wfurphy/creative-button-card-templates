button_mini:
  template:
    - style_helper
    - state_helper
    - actions
    - show_only_icon
    - resizable
    - interactive
  variables:
    height: 40px
    __get: >
      [[[
        return function(prop, vars) {
          if (!vars.item) return vars[prop] || undefined
          return vars.item[prop] || vars[prop] || undefined
        }
      ]]]
    item: {}
    symbol:
    symbol_width: 50%
    symbol_font_size: 10pt
    symbol_color: var( --ha-card-background, var(--card-background-color, white) )
  size: 30px
  custom_fields:
    symbol: >
      [[[
        if (!variables.__get('symbol', variables)) return ''
        
        let sym = String(variables.__get('symbol', variables))

        if (sym.search('mdi:') !== -1) {
          return `<ha-icon icon="${sym}" class="cbc-symbol" />`
        }
        
        sym = sym.substring(0,1)
        return `<span class="cbc-symbol">${sym}</span>`
      ]]]
  styles:
    card:
      - min-width: 30px
    custom_fields:
      symbol:
        - z-index: 7
        - width: "[[[ return variables.__get('symbol_width', variables) ]]]"
        - position: absolute
        - justify-self: center
        - margin-top: -25%
        - color: "[[[ return variables.__get('symbol_color', variables) ]]]"
        - font-size: "[[[ return variables.__get('symbol_font_size', variables) ]]]"
        - font-weight: bold

############| Button Mini - Embeded |###########################>
button_mini_embed:
  template:
    - button_mini
  variables:
    width: 30px
  styles:
    card:
      - min-width: 10px
      - background: none
      - box-shadow: none
      - border: 0

############| Button Mini + State |###########################>
button_mini_state:
  template:
    - button_mini
  layout: icon_state
  entity: input_boolean.air_circulation
  show_state: true
  # color_type: card
  size: 25px
  styles:
    card:
      - height: 40px
      - width: 70px
    state:
      - justify-self: center
      - text-align: left
      # - margin-left: '-5px'
      - font-size: 11pt
    icon:
      - justify-self: end
      - margin-left: 5px

#########################################################################/