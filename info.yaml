############| Info Mini |############################>
info_mini:
  template:
    - base_addons
    - actions
  layout: icon_state
  show_state: true
  show_name: false
  styles:
    card:
      - height: 40px
      - opacity: "[[[ return variables._opacity ]]]"

#### Info Item ######################################################>
info_item:
  template:
    - base_addons
    - actions
    - transparent
  variables:
    _icon_color: "var(--state-icon-color)"
  show_state: true
  size: 100%
  state_display: >
    [[[
      return html`<span class="wfbc-item-value">${entity.state}</span><span class="wfbc-item-suffix">${entity.attributes.unit_of_measurement}</span>`
    ]]]
  styles:
    grid:
      # - position: relative
      - grid-template-areas: '"n n i" "s s i"'
      - grid-template-columns: 1fr 1fr 1fr
      - grid-template-rows: 1fr 1fr
      - height: 50px
      # - width: 100px
    card:
      - height: 50px
      # - width: 110px
      - min-width: 90px
      # - max-width: 130px
      - justify-self: center
      - align-self: center
      - padding: 0
      - margin: 0
    icon:
      - justify-self: start
      - align-self: start
      - margin-top: none
      - color: "[[[return variables._icon_color ]]]"
      - width: 30px
      - overflow: visible
      - opactiy: 0.6
    name:
      - color: var(--secondary-text-color)
      - justify-self: end
      - align-self: end
      - overflow: visible
      - font-size: 14px
      - text-justify: right
      # - font-weight: bold
      # - text-transform: uppercase
    state:
      - justify-self: end
      - align-self: start
      - overflow: visible
      - font-size: 18px
      # - font-weight: bold
      - text-justify: right
  extra_styles: |
    .wfbc-item-suffix {
      opacity: 0.6;
      font-size: 85%;
      margin-top: 5%;
      font-weight: normal;
    }

#### Info Card ######################################################>
info:
  template:
    - no_actions
  show_icon: false
  show_name: false
  card_size: 1
  variables:
    _items: []
    _icon_color: "var(--state-icon-color)"
    __defaults:
      - color: "var(--state-icon-color)"
      - color: "var(--state-icon-color)"
      - color: "var(--state-icon-color)"
      - color: "var(--state-icon-color)"
  styles:
    grid:
      - grid-template-areas: >
          [[[
            variables.__qty = variables._items.length
            
            let areas = '\"cgap dts1'
            
            for (let x = 0; x < variables._items.length; x++) {
              const obj = variables._items[x]
              console.log('before', variables._items[x], obj)
              variables._items[x] = Object.assign(variables.__defaults[x], obj)
              console.log ('after', variables._items[x])
              const dtid = `dts${x+1}`
              areas += (x > 0 && x < 4) ? ` ${dtid}` : ''
            }

            console.log(variables._items)

            //  variables._items.forEach(function(e, i) {
            //    variables._items[i] = Object.assign(variables.__defaults, variables._items[i])
            //    const dtid = `dts${i+1}`
            //    areas += (i > 0 && i < 4) ? ` ${dtid}` : ''
            //  })

            return areas += ' egap\"'
          ]]]
      - grid-template-columns: > 
          [[[
            let cols = '1fr 8fr'

            variables._items.forEach(function(k, i) {
              cols += (i > 0 && i < 4) ? ' 8fr' : ''
            })

            return cols += ' 1fr'
          ]]]
      - grid-template-rows: 1fr
      - justify-items: center
      - align-items: center
      - text-align: center
      - margin: auto
      - padding: 0
      - height: 50px
    card:
      - height: 50px
      - max-width: 100%
      - justify-self: center
      - align-self: start
      - text-align: center
      - padding: 0
      - margin: 0
    custom_fields:
      dts1:
        - justify-self: center
        - align-self: center
        - display: "[[[return variables.__qty >= 1 ? 'inline-block' : 'none' ]]]"
        - overflow: visible
        - margin: 0
      dts2:
        - justify-self: center
        - align-self: center
        - display: "[[[return variables.__qty >= 2 ? 'inline-block' : 'none' ]]]"
        - overflow: visible
        - margin: 0
      dts3:
        - justify-self: center
        - align-self: center
        - display: "[[[return variables.__qty >= 3 ? 'inline-block' : 'none' ]]]"
        - overflow: visible
        - margin: 0
      dts4:
        - justify-self: center
        - align-self: center
        - display: "[[[return variables.__qty >= 4 ? 'inline-block' : 'none' ]]]"
        - overflow: visible
        - margin: 0
  custom_fields:
    dts1:
      card:
        type: custom:button-card
        template: 
          - info_item
          - transparent
        variables:
          _icon_color: "[[[return variables.__qty >= 1 ? variables._items[0].color : null ]]]"
        entity: "[[[ return variables.__qty >= 1 ? variables._items[0].entity_id : null ]]]"
        name: "[[[ return variables.__qty >= 1 ? variables._items[0].name : null ]]]"
    dts2:
      card:
        type: custom:button-card
        template: 
          - info_item
          - transparent
        variables:
          _icon_color: "[[[return variables.__qty >= 2 ? variables._items[1].color : null ]]]"
        entity: "[[[ return variables.__qty >= 2 ? variables._items[1].entity_id : null ]]]"
        name: "[[[ return variables.__qty >= 2 ? variables._items[1].name : null ]]]"
    dts3:
      card:
        type: custom:button-card
        template: 
          - info_item
          - transparent
        variables:
          _icon_color: "[[[return variables.__qty >= 3 ? variables._items[2].color: null ]]]"
        entity: "[[[ return variables.__qty >= 3 ? variables._items[2].entity_id : null ]]]"
        name: "[[[ return variables.__qty >= 3 ? variables._items[2].name : null ]]]"
    dts4:
      card:
        type: custom:button-card
        template: 
          - info_item
          - transparent
        variables:
          _icon_color: "[[[return variables.__qty >= 4 ? variables._items[3].color : null ]]]"
        entity: "[[[ return variables.__qty >= 4 ? variables._items[3].entity_id : null ]]]"
        name: "[[[ return variables.__qty >= 4 ? variables._items[3].name : null ]]]"
    cgap: >
      [[[
        return `<div style="width: 20px;"></span>`
      ]]]
    egap: >
      [[[
        return `<div style="width: 20px;"></span>`
      ]]]

#########################################################################/