#### WF::BCT ############| Device |############ github.com/wfurphy #####>
device:
  template: 
    - button_landscape
  variables:
    ## _attr @deprecated v0.2 replaced by _attributes
    _attr: []
    _attributes: []
  show_state: false
  show_label: true
  label: >
    [[[
        variables._attributes = [...variables._attr, ...variables._attributes]

        if (!variables._attributes || !variables._attributes.length)) return ''

        let lab = `
          <style>
            ha-icon.cbc-icon {
              width:18px; 
              padding-right: 5px; 
            }
            .cbc-suffix {
              font-size: 70%
              opacity: 0.4
            }
          </style>
          <div 
          `
        
        variables._attributes.forEach(function(a,i) {
          const at = {...{id: '', icon: 'mdi:layers-plus', prefix: '', suffix: ''}, ...a}
          
          lab += `
            <div id="cbc-attr${i}-${a.id}" class="cbc-attr">
              <ha-icon icon="${at.icon}" class="cbc-icon"></ha-icon>
              <span class="cbc-prefix">${at.prefix}</span>
              <span class="cbc-value">${entity.attributes[at.id]}</span>
              <span class="cbc-suffix">${at.suffix}</span>
            </div>`
        })
        
        return lab
    ]]]
  styles:
    grid:
      - grid-template-areas: '"i i n" "i i l"'
      - grid-template-columns: 1fr 1fr 4fr
      - grid-template-rows: >
          [[[
            if (!variables._attributes || !variables._attributes.length) return '1fr 1fr'

            return entity.state == 'on' ? '1fr 2fr' : '1fr 1fr'
          ]]]

#########################################################################/

